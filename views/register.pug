doctype html
html
	head
		if userLogged
			script.
				window.location.replace = "/";
		title Matcha | #{title}
		include header_items.pug
		link(rel='stylesheet', href='/register.css')
	body
		include navbar.pug

		.container.mx-auto
			h1.text-center.mt-white.mt-5.display-3 One of Us, One of Us!
			.row
				.col
					.card.my-5.mx-auto(style='max-width:500px')
						.card-body
							block content
								h1 Register
								small#passwordHelpBlock.form-text.text-muted
									| Fields marked with an asterisk are required.
								hr
								form#register.needs-validation(name="register", action='', method='POST' novalidate)
									.form-group
										label(for='userName') * Username:
										input#userLogin.form-control(type='text' placeholder='Enter Username' name='userLogin' required)
										.valid-feedback Valid.
										.invalid-feedback Please fill out this field.

									.form-group
										.form-group
											label(for='firstName') * Name:
											input#userName.form-control(type='text' placeholder='Enter Name' name='userName' required)
											.valid-feedback Valid.
											.invalid-feedback Please fill out this field.

										.form-group
											label(for='lastName') * Surname:
											input#userSurname.form-control(type='text' placeholder='Enter Surname' name='userSurname' required)
											.valid-feedback Valid.
											.invalid-feedback Please fill out this field.

									.form-group
										label(for='email') * Email:
										input#userEmail.form-control(type='email' placeholder='Enter Email' name='userEmail' required)
										.valid-feedback Valid.
										.invalid-feedback Please fill out this field.

									.form-group
										.form-group
											label(for='password') * Password:
											input#userPass.form-control(type='password' placeholder='Enter Password' name='userPass' required)
											small#passwordHelpBlock.form-text.text-muted
												| Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.
											.valid-feedback Valid.
											.invalid-feedback Please fill out this field.

										.form-group
											label(for='confirmPassword') * Confirm Password:
											input#userConfPass.form-control(type='password' placeholder='Confirm Password' name='userConfPass' required)
											.valid-feedback Valid.
											.invalid-feedback Please fill out this field.

									p.text-right
										| Already have an account? 
										a(href='/user/login') Login.
									
									button#submit.btn.btn-success.btn-block.btn-lg.enableOnInput(type='submit', value='register' disabled='disabled') Register
									//- input#submit.btn.btn-success.btn-block.btn-lg.enableOnInput(type='button', value='Register' onclick='RegisterCheck()' style="background-color:#28a745")
								p#error.mt-3

		include footer.pug

			//- SCRIPTS
		include bootstrap_js.pug
		script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js")

		//- script(src="/submission.js")
		//- script(src="/register.js")

		//- script.
		//- 	$('#userLogin, #userName, #userSurname, #userEmail, #userPassword, #userConfPass').keyup(function () {
		//- 		if ($(this).val() == '') {
		//- 			//Check to see if there is any text entered
		//- 			// If there is no text within the input ten disable the button
		//- 			$('.enableOnInput').prop('disabled', true);
		//- 		} else {
		//- 			//If there is text in the input, then enable the button
		//- 			$('.enableOnInput').prop('disabled', false);
		//- 		}
		//- 	});

		script(src='/validation.js')
		script.
			var userLogin, userName, userSurname, userEmail, userPass, userConfPass;

			$("input[type='text'], input[type='password'], input[type='email']").on("keyup", function(){
				userLogin=document.getElementById("userLogin").value;
				userName=document.getElementById("userName").value;
				userSurname=document.getElementById("userSurname").value;
				userEmail=document.getElementById("userEmail").value;
				userPass=document.getElementById("userPass").value;
				userConfPass=document.getElementById("userConfPass").value;

				if(registrationValid(userLogin, userName, userSurname, userEmail, userPass, userConfPass) == 1){
					$("#submit").prop("disabled", false);
				} else {
					console.log(registrationValid(userLogin, userName, userSurname, userEmail, userPass, userConfPass))
					$("#submit").prop("disabled", true);
				}
			});